<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Tether core CSS -->
	<link href="../../css/tether.min.css" th:href="@{/css/tether.min.css}" rel="stylesheet">

	<!-- Bootstrap core CSS -->
	<link href="../../css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet">

	<!-- Font-Awesome CSS -->
	<link href="../../css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}" rel="stylesheet">

	<!-- Custom styles -->
	<link href="../../css/blog.css" th:href="@{/css/blog.css}" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-inverse bg-inverse navbar-toggleable-md">
	<div class="container">
		<button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
				data-target="#navbarsContainer" aria-controls="navbarsExampleContainer" aria-expanded="false"
				aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<a class="navbar-brand" href="/" th:href="@{/}">Spring Security Tutorial</a>

		<div class="collapse navbar-collapse" id="navbarsContainer">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item">
					<a class="nav-link" href="/" th:href="@{/}">首页 <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/users" th:href="@{/users}">用户管理</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/admins" th:href="@{/admins}">管理员管理</a>
				</li>
			</ul>

			<ul class="navbar-nav mr-auto navbar-right">
				<li class="nav-item" sec:authorize="isAnonymous()">
					<a class="nav-link" href="/login" th:href="@{/login}">登录 </a>
				</li>
				<li class="nav-item" sec:authorize="isAuthenticated()">
					<span class="nav-link"  sec:authentication="name"></span>
				</li>
				<li class="nav-item">
					<form action="/logout" th:action="@{/logout}" method="post">
						<input class="btn btn-default" type="submit" value="退出"/>
					</form>
				</li>
			</ul>
		</div>
	</div>
</nav>
	<div class="container">
      	<div class="mt-3">
        	<h2>Hello Spring Security</h2>
        </div>
		<div sec:authorize="isAuthenticated()" th:if="${principal}" th:object="${principal}">
			<p>已有用户登录</p>
			<p>登录的用户为: <span sec:authentication="name"></span></p>
			<p>用户权限为: <span th:text="*{userAuthentication.authorities}"></span></p>
 			<p>用户头像为: <img alt="" class="avatar width-full rounded-2" height="230" th:src="*{userAuthentication.details.avatar_url}" width="230"/></p>
 			
		</div>
 		<div sec:authorize="isAnonymous()">
			<p>未有用户登录</p>
		</div>
	</div>

<footer class="blog-footer" data-th-fragment="footer">
	<script src="../../js/jquery-3.1.1.min.js" th:src="@{/js/jquery-3.1.1.min.js}"></script>
	<script src="../../js/tether.min.js" th:src="@{/js/tether.min.js}"></script>
	<script src="../../js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>

</footer>
</body>
</html>